version: 0.2

phases:
    install:
        runtime-versions:
            python: 3.6
        commands:
            - yum install -y gcc libffi-devel python-devel openssl-devel
            - pip install -U pip virtualenv wheel
    build:
        commands:
            - bash build_cryptography_custom_openssl.sh
            - mkdir site-packages
            - pip install --target=site-packages --no-index --find-links=`pwd` cryptography

artifacts:
    files:
        - site-packages/**/*
        - lambda_entry.py
